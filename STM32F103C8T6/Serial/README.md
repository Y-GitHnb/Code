# 开发板：
	STM32F103C8T6


# 程序功能：
	- 串口 1 实现串口中断（有数据并且收到回车换行后 回显）
	- 串口 2 实现串口空闲中断（检测到串口空闲后 回显，识别空闲不判断回车换行）
	- 串口 3 实现串口 DMA 中断（检测到串口空闲后 通过 DMA 回显）


# 原理说明：
	* 串口轮询：发送数据过程中 CPU 不断轮询“发送数据寄存器”中的数据是否移动到“发送移位寄存器”下，直到数据发完，或用时超过超时时间结束。因此轮询模式在数据接收和发送过程中 CPU 不会去做其他事情，主程序中的代码会进行阻塞直到 IO 结束。
		- 轮询在循环程序中使用 HAL_UART_Receive(&huart1, UART1_data, REC_LENGTH, HAL_MAX_DELAY); 函数循环判断接收数据。

	* 串口中断：接收和发送数据时 CPU 不会轮询 发送/接收数据寄存器 是否有数据，而是 发送/接收数据寄存器 每当发送数据时会主动发送一个中断通知 CPU。因此 CPU 在将数据寄存器中的数据移动到移位寄存器后，就可以去执行其他任务了。当发送移位寄存器中的数据发送出去后会触发“发送移位寄存器空”中断再把 CPU 叫回来，如此反复完成 IO。

	* 串口空闲中断：在接收一个字节的时间内，如果在这段时间内没有再接收到数据，单片机串口则触发空闲中断，把 IDLE 标志置一标记串口空闲

	* DMA：Directional Memory Access 直接存储器存取 用来提供在外设和存储器之间或者存储器和存储器之间的高速数据传输。无须CPU干预，数据可以通过 DMA快速移动，节省了 CPU 的资源来做其他操作。


# 备注说明
	* STM32 IDLE 接收空闲中断
		- 在使用串口接受字符串时可以使用空闲中断（IDLEIE 置 1 使能空闲中断），在接收完一个字符串进入空闲状态时（IDLE 置 1）便会激发一个空闲中断。

	* STM32 IDLE 中断产生条件：
		- 在串口无数据接收的情况下不会产生，当清除 IDLE 标志位后，必须有接收到第一个数据后才开始触发，一但接收的数据断流，没有接收到数据，即产生 IDLE 中断。

	* STM32 RXNE 接收数据中断
		- 当串口接收到 1bit 的数据时，(读取到一个停止位)便会触发 RXNE 接收数据中断接受到一个字节的数据，触发中断。比如给上位机给单片机一次性发送了8个字节，就会产生 8 次 RXNE 中断，1 次 IDLE 中断。

	* 串口空闲中断 + DMA 实现思路：串口配置成空闲中断 IDLE 模式且使能 DMA 接收，并同时设置接收缓冲区和初始化 DMA。当外部给单片机发送数据时，假设接收的数据长度是 200 个字节，在单片机接收到一个字节时不会产生串口中断，而是 DMA 在后台把数据搬到你指定的缓冲区数组里。当整帧数据发送完毕后串口会产生一次中断，此时利用 __HAL_DMA_GET_COUNTER(&hdma_usart_rx); 函数计算出当前 DMA 接收存储空间剩余字节
		- 本次数据接收长度 = 预先定义的接收总字节 - 接收存储空间剩余字节

