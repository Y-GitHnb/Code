# 开发板：
	STM32F103C8T6


# 程序功能：
	窗口看门狗 / 独立看门狗


# 原理说明：
	* 这两个看门狗的作用都是监控程序运行，程序死机或跑飞就使系统复位。


	* 窗口看门狗
		- 窗口看门狗的本质是一个能产生系统复位信号 和 提前唤醒中断 的 6位计数器，用于监测单片机程序运行时效是否精准，主要检测软件异常，一般用于需要精准检测程序运行时间的场合。

		- 产生复位条件：
			- 当递减计数器值从 0x40 减到 0x3F 时复位（即 T6 位跳变到 0 ）
			- 计数器的值大于 W[6:0] 值时喂狗会复位。

		- 产生中断条件：
			- 当递减计数器等于 0x40 时可产生提前唤醒中断 (EWI) 。
			- 在窗口期内 重装载 计数器的值，防止复位，也就是所谓的喂狗。

		- 超时溢出时间：
			Tout = (4096 * 2^WDGTB * (T[5:0]+1)) / Fwwdg
				- 4096：WWDG 固定的预分频系数
				- 2^WDGTB：WWDG_RFC 寄存器设置的预分频系数值
				- T[5:0]：WWDG 计数器低六位，最大63
				- Fwwdg：WWDG 的时钟源频率（103 单片机最大 36MHz）
		
		- 示例程序解析：
			- 程序中窗口看门狗的分频系数设置 8，窗口值(W[6:0])设置 90，重装值(C[6:0])设置 127，PCLK1 设置 36MHz
			- 时钟经过 4096 次分频，再经过设置的 8 分频得到的频率为 1098.6328125 Hz
			- 不允许喂狗时间：（127-90）/1098.6328125 ≈ 0.03367s ≈ 33.67ms
			- 超时时间：（127-63）/1098.6328125 ≈ 0.05825s ≈ 58.25ms
			- 只有 90 减到 63 的区间可以喂狗


	* 独立看门狗
		- 独立看门狗本质是一个 12 位的递减计数器，当计数器的值从某个值一直减到0的时候，系统就会产生一个复位信号，即 IWDG_RESET，如果在计数没减到0之前刷新了计数器的值，就不会产生复位信号，这个动作就是我们经常说的喂狗。
		- 独立看门狗工作在主程序之外，能够完全独立工作，它的时钟是独立的 RC 振荡器和专用的低速时钟 LSI，由 VDD 电压供电，在停止模式和待机模式下仍能工作，启用 IWDG 后，LSI 时钟会自动开启。LSI 时钟频率并不精确，F1 用 40kHz。

		- 超时溢出时间：
			Tout = (PSC * RLR) / f IWDG


# 备注说明
	* 独立/窗口看门狗只要被初始化就会自动启动，用户只需喂狗即可
	* 值得注意的是，一旦开启看门狗就无法停止，除非系统复位

	* 窗口看门狗 WWDG 配置
		- WWDG counter clockprescaler （时钟分频）：可以设置为1/2/4/8分频
		- WWDG window value （窗口W[6:0]值）：可设置范围 63(T[6:0])~127
		- WWDG down-counter reload value （递减计数器重装值）：可设置范围 63-127（7位最大值127且不能小于0x3F）

	* 独立看门狗 IWDG 配置
		- IWDG counter clockprescaler （时钟分频）：可以设置为4/8/16/.../256分频
		- IWDG down-counter reload value （递减计数器重装值）：可设置范围0-4095（12位）

	* 二狗对比
		时钟源：			IWDG（独立时钟 LSI(40KHz)，不精确）		WWDG（PCLK1 或 PCKL3，精确）
		复位条件：			IWDG（递减计数到 0）					WWDG（窗口期外喂狗 或 递减计数到0x3f）
		中断：				IWDG（没有中断）					WWDG（计数值减到 0x40 产生中断）
		递减计数器位数：	IWDG（12位(最大计数范围 0-4096)）		WWDG（7位(最大计数范围 63-127)）
		应用场合：			IWDG（防止程序跑飞，死机）				WWDG（检测程序时效，防止软件异常）
